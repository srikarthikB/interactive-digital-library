<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{ book.title }}</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Serif font for library feel -->
    <style>
        body {
            font-family: Georgia, "Times New Roman", serif;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br
             from-[#5D4037] via-[#EFEBE9] to-[#5D4037]
             p-8">

<div class="max-w-3xl mx-auto bg-[#FAF7F2]/95 backdrop-blur-sm rounded-3xl p-8
            text-[#3E2723] shadow-2xl">

    <!-- TITLE -->
    <h1 class="text-3xl font-bold mb-4">{{ book.title }}</h1>

    <!-- DESCRIPTION -->
    <p class="text-[#4E342E] mb-6 leading-relaxed">
        {{ book.description }}
    </p>

    <!-- AI SUMMARY -->
    <div class="mt-6">
        <h3 class="text-xl font-semibold mb-2">AI Summary</h3>

        <!-- Short summary -->
        <p class="text-[#4E342E] leading-relaxed">
            {{ summary.short }}
        </p>

        <!-- Read more -->
        <button
            onclick="document.getElementById('full-summary').classList.toggle('hidden')"
            class="mt-2 text-sm text-[#6D4C41] hover:text-[#3E2723]"
        >
            Read full AI summary
        </button>

        <!-- Full summary (hidden by default) -->
        <div id="full-summary" class="hidden mt-4">
            <p class="text-[#4E342E] leading-relaxed whitespace-pre-line">
                {{ summary.full }}
            </p>
        </div>
    </div>

    <!-- AUDIO -->
    <div class="mt-6">
        <button
            onclick="document.getElementById('audio-player').classList.toggle('hidden')"
            class="flex items-center gap-2 text-sm text-[#6D4C41] hover:text-[#3E2723]"
        >
            üîä Listen to audio version
        </button>

        <div id="audio-player" class="hidden mt-3">
            <audio controls class="w-full">
                <source src="{{ url_for('static', filename='audio/' + book.slug + '.mp3') }}" type="audio/mpeg">
            </audio>
        </div>
    </div>

    <!-- ACTION BUTTONS -->
    <div class="mt-8 flex flex-wrap gap-4">

        {% if book.archive_link %}
            <a
              href="{{ book.archive_link }}"
              target="_blank"
              class="px-6 py-3 rounded-xl bg-[#6D4C41] text-[#FAF7F2]
                     font-semibold hover:bg-[#5D4037] transition"
            >
              Read Book
            </a>
        {% endif %}

        <a
          href="/book/{{ book.id }}/visuals"
          class="px-6 py-3 rounded-xl bg-[#D7CCC8] text-[#3E2723]
                 hover:bg-[#BCAAA4] transition font-semibold"
        >
          View AI Visual Summary
        </a>
    </div>

    <!-- BACK -->
    <a href="/" class="block mt-8 text-[#6D4C41] hover:text-[#3E2723]">
        ‚Üê Back to Home
    </a>

</div>
</body>
</html>
